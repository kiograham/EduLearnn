<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>EduLearn - LMS Lengkap</title>
    <link rel="stylesheet" href="style.css">
</head><body>

<div id="login-page" class="login-wrapper"> <div class="login-main-card">
        <div class="login-left">
            <div class="login-header-mini">
                <div class="logo-circle"></div>
                <p>Log in / Sign Up On EduLearn</p>
            </div>

            <div class="login-form-container">
                <div class="login-input-item">
                    <label>Email Address:</label>
                    <input type="email" id="username" placeholder="abc@xyz.com">
                </div>

                <div class="login-input-item">
                    <label>Password:</label>
                    <input type="password" id="password" placeholder="â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢">
                </div>

                <div class="login-helper">
                    <label><input type="checkbox"> Remember me</label>
                </div>

                <button id="btn-login-email" class="btn-gradient-login">Log in</button>

                <div class="login-social">
                    <p>or connect with</p>
                    <div class="social-icons">
                        <button id="btn-login-google" class="social-btn">G</button>
                    </div>
                </div>

                <p class="signup-text">Don't have an account? <a href="#" id="link-register">Sign up</a></p>
            </div>
        </div>

        <div class="login-right">
            <div class="brand-content">
                <h1>EduLearn</h1>
                <p>Platform belajar digital terintegrasi untuk masa depan akademik yang lebih cerah dan efisien.</p>
            </div>
            <div class="blob-bg"></div>
        </div>
    </div>
</div>

  <div id="register-modal" class="login-wrapper hidden"> <div class="login-main-card" style="height: auto; max-width: 500px; flex-direction: column; padding: 40px;">
        
        <div class="login-header-mini">
            <div class="logo-circle" style="background: linear-gradient(to right, #a855f7, #ec4899); border: none;"></div>
            <h2 style="color: #1e293b; font-size: 1.5rem; margin-bottom: 5px;">Daftar Akun Baru</h2>
            <p>Bergabunglah dengan komunitas EduLearn</p>
        </div>

        <div class="login-form-container">
            <div class="login-input-item">
                <label>Nama Lengkap:</label>
                <input type="text" id="reg-name" placeholder="Masukkan nama Anda">
            </div>

            <div class="login-input-item">
                <label>Email Address:</label>
                <input type="email" id="reg-email" placeholder="nama@sekolah.id">
            </div>

            <div class="login-input-item">
                <label>Password:</label>
                <input type="password" id="reg-password" placeholder="Minimal 6 karakter">
            </div>

            <div class="login-input-item">
                <label>Daftar Sebagai:</label>
                <select id="reg-role" onchange="toggleTeacherCode()" 
                        style="width: 100%; padding: 12px; border: 1.5px solid #e2e8f0; border-radius: 10px; background: white;">
                    <option value="student">Siswa / Murid</option>
                    <option value="teacher">Guru / Pengajar</option>
                </select>
            </div>

            <div id="teacher-code-group" class="hidden" style="margin-bottom: 20px; padding: 15px; background: #faf5ff; border-radius: 12px; border: 1px solid #e9d5ff;">
                <label style="color: #7c3aed; font-weight: bold; font-size: 0.8rem;">Kode Token Guru:</label>
                <input type="password" id="reg-teacher-code" placeholder="Masukkan kode rahasia" 
                       style="width: 100%; padding: 8px; border: 1px solid #ddd; border-radius: 8px; margin-top: 5px;">
            </div

            <div style="display: flex; gap: 10px; margin-top: 10px;">
                <button id="btn-cancel-register" class="social-btn" style="flex: 1; border-radius: 12px; width: auto; height: 50px;">Batal</button>
                <button id="btn-submit-register" class="btn-gradient-login" style="flex: 2;">Buat Akun</button>
            </div>
        </div>
    </div>
</div>

    <div id="loading-overlay" class="fullscreen-overlay hidden">
        <div class="spinner"></div>
        <p class="loading-text">Memuat data...</p>
    </div>

<div id="create-class-modal" class="modal hidden">
    <div class="modal-card">
        <h2 class="modal-title">Buat Kelas Baru</h2>
        
        <div class="form-group">
            <label>Nama Mata Pelajaran</label>
            <input type="text" id="class-title" class="form-input" placeholder="Contoh: Matematika X-A">
        </div>
        
        <div class="form-group">
            <label>Hari Jadwal</label>
            <select id="class-day" class="form-input">
                <option value="Senin">Senin</option>
                <option value="Selasa">Selasa</option>
                <option value="Rabu">Rabu</option>
                <option value="Kamis">Kamis</option>
                <option value="Jumat">Jumat</option>
                <option value="Sabtu">Sabtu</option>
            </select>
        </div>
        
        <div class="form-group">
            <label>Jam Mulai</label>
            <input type="time" id="class-time" class="form-input">
        </div>
        
        <div class="modal-actions">
            <button class="btn btn-secondary" onclick="document.getElementById('create-class-modal').classList.add('hidden')">Batal</button>
            <button class="btn btn-primary" onclick="createClass()">Simpan Kelas</button>
        </div>
    </div>
</div>

    <div id="join-class-modal" class="fullscreen-overlay hidden">
        <div class="modal-card">
            <h2 class="modal-title">Gabung Kelas</h2>
            <p class="text-muted" style="margin-bottom: 1rem;">Masukkan kode kelas yang diberikan oleh gurumu.</p>
            <div class="form-group">
                <label>Kode Kelas</label>
                <input type="text" id="join-class-code" class="form-input" placeholder="Contoh: FIS101">
            </div>
            <div class="modal-actions">
                <button onclick="document.getElementById('join-class-modal').classList.add('hidden')" class="btn btn-secondary">Batal</button>
                <button id="btn-submit-join" class="btn btn-primary">Gabung Sekarang</button>
            </div>
        </div>
    </div>

<div id="modal-add-materi" class="fullscreen-overlay hidden">
    <div class="modal-card" style="max-width: 700px; max-height: 90vh; overflow-y: auto;">
        <h2 class="modal-title">Bagikan Materi</h2>
        
        <!-- Pilihan Tipe Materi -->
        <div style="display: flex; gap: 10px; margin-bottom: 20px;">
            <button onclick="switchMateriType('link')" id="btn-materi-link" 
                    class="btn btn-primary" style="flex: 1;">
                ğŸ”— Link Eksternal
            </button>
            <button onclick="switchMateriType('document')" id="btn-materi-doc" 
                    class="btn btn-secondary" style="flex: 1;">
                ğŸ“ Tulis Dokumen
            </button>
        </div>
        
        <!-- Form Input -->
        <div class="form-group">
            <label>Judul Materi</label>
            <input type="text" id="materi-title" class="form-input" placeholder="Contoh: Modul Bab 1">
        </div>
        
        <!-- Tipe: Link -->
        <div id="materi-link-area">
            <div class="form-group">
                <label>Link (Google Drive / YouTube / Website)</label>
                <input type="text" id="materi-link" class="form-input" placeholder="https://...">
            </div>
        </div>
        
        <!-- Tipe: Dokumen -->
        <div id="materi-doc-area" class="hidden">
            <div class="form-group">
                <label>Isi Materi</label>
                <textarea id="materi-content" class="form-input" rows="12" 
                          placeholder="Ketik materi di sini... 

Contoh:
=== BAB 1: PENGENALAN ===

1. Pengertian
Materi ini membahas tentang...

2. Tujuan
- Memahami konsep dasar
- Menerapkan dalam praktik

3. Rangkuman
..."></textarea>
            </div>
            
            <!-- Upload File Pendukung (Opsional) -->
            <div class="form-group">
                <label>Upload File Pendukung (PDF/Gambar - Opsional)</label>
                <input type="file" id="materi-file" class="form-input" accept=".pdf,image/*">
                <small style="color: #64748b; font-size: 0.75rem;">File ini akan dilampirkan sebagai referensi tambahan.</small>
            </div>
        </div>
        
<div class="modal-actions">
    <button onclick="document.getElementById('modal-add-materi').classList.add('hidden')" class="btn btn-secondary">Batal</button>
    <button id="btn-submit-materi" class="btn btn-primary" onclick="saveMateri()">Posting Materi</button>
</div>
    </div>
</div>

    <div id="modal-add-tugas" class="fullscreen-overlay hidden">
        <div class="modal-card">
            <h2 class="modal-title">Buat Tugas Baru</h2>
            
            <div class="form-group">
                <label>Judul Tugas</label>
                <input type="text" id="tugas-title" class="form-input" placeholder="Contoh: Latihan Soal">
            </div>
            
            <div class="form-group">
                <label>Deadline</label>
                <input type="date" id="tugas-deadline" class="form-input">
            </div>

            <div class="form-group">
                <label>Upload File Soal (PDF/Gambar - Opsional)</label>
                <input type="file" id="tugas-file" class="form-input">
            </div>

            <div class="form-group">
                <label>Deskripsi</label>
                <textarea id="tugas-desc" class="form-input" rows="3" placeholder="Instruksi pengerjaan..."></textarea>
            </div>
            
            <div class="modal-actions">
                <button onclick="document.getElementById('modal-add-tugas').classList.add('hidden')" class="btn btn-secondary">Batal</button>
                <button id="btn-submit-tugas" class="btn btn-primary" onclick="saveTugas()">Posting Tugas</button>
            </div>
        </div>
    </div>

    <div id="modal-grading" class="fullscreen-overlay hidden">
        <div class="modal-card">
            <h2 class="modal-title">Beri Nilai</h2>
            <p id="grade-student-name" class="text-muted" style="margin-bottom: 1rem;">Nama Siswa</p>
            <div class="form-group">
                <label>Nilai (0 - 100)</label>
                <input type="number" id="grade-input" class="form-input" placeholder="Contoh: 85" min="0" max="100">
            </div>
            <div class="modal-actions">
                <button onclick="document.getElementById('modal-grading').classList.add('hidden')" class="btn btn-secondary">Batal</button>
                <button id="btn-submit-grade" class="btn btn-success">Simpan Nilai</button>
            </div>
        </div>
    </div>

    <nav class="navbar" id="main-navbar" style="display: none;">
        <div class="logo brand-title" style="font-size: 1.5rem; margin: 0;">EduLearn</div>
        <div class="profile-wrapper">
            <div class="profile-trigger" onclick="toggleProfileMenu()">
                <div class="user-avatar" id="nav-avatar">UR</div>
                <span class="arrow-icon">â–¼</span> 
            </div>
            <div id="profile-dropdown" class="dropdown-menu hidden">
                <div class="dropdown-header">
                    <p id="dropdown-name" class="user-name">User</p>
                    <p id="dropdown-role" class="user-role">Role</p>
                </div>
                <div class="dropdown-item" onclick="showPage('profile')">ğŸ‘¤ Profil Saya</div>
                <div class="dropdown-item" onclick="showPage('settings')">âš™ï¸ Pengaturan</div>
                <div class="dropdown-item logout-item" onclick="handleLogout()">ğŸšª Keluar</div>
            </div>
        </div>
    </nav>

    <div class="container" id="main-container" style="display: none;">
        

<aside class="sidebar">
    
    <!-- Section 1: Menu Utama -->
    <div class="menu-section">
        <div class="menu-section-title">Menu Utama</div>
        
        <div id="menu-dashboard" class="menu-item active" onclick="showPage('dashboard')">
            <div class="menu-icon">ğŸ </div>
            <span class="menu-text">Dashboard</span>
        </div>
        
        <div id="menu-my-classes" class="menu-item" onclick="showPage('my-classes')">
            <div class="menu-icon">ğŸ“š</div>
            <span class="menu-text">Kelas Saya</span>
        </div>
        
        <div id="menu-calendar" class="menu-item" onclick="showPage('calendar')">
            <div class="menu-icon">ğŸ“…</div>
            <span class="menu-text">Kalender</span>
        </div>
    </div>

    <!-- Divider (Garis Pemisah) -->
    <div class="menu-divider"></div>

    <!-- Section 2: Aktivitas -->
    <div class="menu-section">
        <div class="menu-section-title">Aktivitas</div>
        
        <div id="menu-transcript" class="menu-item" onclick="showPage('transcript')">
            <div class="menu-icon">ğŸ“Š</div>
            <span class="menu-text">Transkrip Nilai</span>
        </div>
        
        <div id="menu-discussion" class="menu-item" onclick="showPage('discussion')">
            <div class="menu-icon">ğŸ’¬</div>
            <span class="menu-text">Diskusi</span>
            <!-- Contoh Badge Notifikasi (bisa dihapus kalau gak perlu) -->
            <!-- <span class="menu-badge">3</span> -->
        </div>
    </div>

    <!-- Divider -->
    <div class="menu-divider"></div>

    <!-- Section 3: Pengaturan -->
    <div class="menu-section">
        <div class="menu-section-title">Lainnya</div>
        
        <div id="menu-settings" class="menu-item" onclick="showPage('settings')">
            <div class="menu-icon">âš™ï¸</div>
            <span class="menu-text">Pengaturan</span>
        </div>
        
        <div id="menu-profile" class="menu-item" onclick="showPage('profile')">
            <div class="menu-icon">ğŸ‘¤</div>
            <span class="menu-text">Profil Saya</span>
        </div>
    </div>

</aside>

        <main class="main-content">
            
            <div id="dashboard-page">
                <div class="page-header">
                    <h1 class="page-title">Dashboard</h1>
                    <p class="page-subtitle">Selamat datang kembali...</p>
                </div>

                <div class="detail-card" style="margin-bottom: 2rem; border-left: 5px solid #4f46e5;">
                    <h3 style="margin-bottom: 1rem;">ğŸ“… Jadwal Hari Ini (<span id="today-name">...</span>)</h3>
                    <div id="today-schedule-list">
                        <p class="text-muted">Memuat jadwal...</p>
                    </div>
                </div>


<div class="stats-grid">
    
    <!-- Card 1: Total Kelas -->
    <div class="stat-card">
        <div class="stat-icon blue">ğŸ“š</div>
        <div class="stat-info">
            <div class="stat-value" id="stat-total-class">0</div>
            <div class="stat-label">Total Kelas</div>
            <!-- Progress Bar (Opsional) -->
            <div class="stat-progress">
                <div class="stat-progress-bar" style="width: 0%" id="progress-class"></div>
            </div>
        </div>
        <!-- Badge NEW (Opsional - bisa dihapus) -->
        <!-- <span class="stat-badge">Aktif</span> -->
    </div>

    <!-- Card 2: Tugas Selesai -->
    <div class="stat-card">
        <div class="stat-icon green">âœ“</div>
        <div class="stat-info">
            <div class="stat-value" id="stat-task-done">0</div>
            <div class="stat-label">Tugas Selesai</div>
            <div class="stat-progress">
                <div class="stat-progress-bar" style="width: 0%; background: linear-gradient(90deg, #10b981, #059669);" id="progress-done"></div>
            </div>
        </div>
    </div>

    <!-- Card 3: Tugas Pending -->
    <div class="stat-card">
        <div class="stat-icon orange">âš </div>
        <div class="stat-info">
            <div class="stat-value" id="stat-task-pending">0</div>
            <div class="stat-label">Tugas Pending</div>
            <div class="stat-progress">
                <div class="stat-progress-bar" style="width: 0%; background: linear-gradient(90deg, #f59e0b, #ea580c);" id="progress-pending"></div>
            </div>
        </div>
        <!-- Badge Warning jika ada tugas menumpuk -->
        <span class="stat-badge" id="badge-urgent" style="display: none; background: linear-gradient(135deg, #ef4444, #dc2626);">Urgent!</span>
    </div>

</div>

                <div class="section-header">
                    <h2 class="section-title">Kelas Saya</h2>
                    <button id="btn-class-action" class="btn btn-primary">+ Aksi</button>
                </div>

                <div class="classes-grid" id="classes-container">
                    <p style="grid-column: 1/-1; text-align: center; color: #64748b; margin-top: 1rem;"></p>
                </div>
            </div>

            <div id="class-detail-page" class="hidden">
                <div class="class-header-banner">
                    <button class="btn-back" onclick="showPage('dashboard')">â† Kembali</button>
                    <div class="class-header-content">
                        <h1 id="detail-class-title">Nama Kelas</h1>
                        <p id="detail-class-info">Kode: ... â€¢ Guru: ...</p>
                    </div>
                </div>

                <div class="tab-menu">
                    <div class="tab-item active" onclick="switchTab('materi')">ğŸ“– Materi</div>
                    <div class="tab-item" onclick="switchTab('tugas')">ğŸ“ Tugas</div>
                    <div class="tab-item" onclick="switchTab('nilai')">ğŸ“Š Nilai</div>
                    <div class="tab-item" onclick="switchTab('absensi')">ğŸ“… Absensi</div>
                    <div class="tab-item" onclick="switchTab('anggota')">ğŸ‘¥ Anggota</div>
                </div>

                <div id="tab-materi" class="tab-content">
                    <div class="section-header">
                        <h3>Daftar Materi</h3>
                        <button id="btn-add-materi" class="btn btn-primary" style="display:none;">+ Tambah Materi</button>
                    </div>
                    <div id="materi-list" class="content-list">
                        <p class="text-muted">Belum ada materi yang diunggah.</p>
                    </div>
                </div>

                <div id="tab-tugas" class="tab-content hidden">
                    <div class="section-header" style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 1.5rem;">
                        <h3>Daftar Tugas & Kuis</h3>
                        
                        <div style="display: flex; gap: 10px;">
                            <button id="btn-add-quiz" class="btn btn-primary" style="display:none; background-color: #8b5cf6;">
                                + Buat Kuis
                            </button>
                            
                            <button id="btn-add-tugas" class="btn btn-primary" style="display:none;">
                                + Buat Tugas
                            </button>
                        </div>
                    </div>
                    <div id="tugas-list" class="content-list" style="margin-top: 1rem;"></div>
                </div>

                <div id="tab-nilai" class="tab-content hidden">
    <div class="section-header" style="display:flex; justify-content:space-between; align-items:center;">
        <h3>Rekapitulasi Nilai</h3>
        
        <button onclick="downloadRekapNilai()" class="btn btn-success" id="btn-download-nilai" style="font-size:0.9rem; padding: 0.5rem 1rem;">
            ğŸ“¥ Download Excel
        </button>
    </div>

    <div id="nilai-list" class="content-list">
        <p class="text-muted"></p>
    </div>
</div>

                <div id="tab-absensi" class="tab-content hidden">
                    <div class="section-header">
                        <h3>Presensi Kehadiran</h3>
                        <span id="absensi-date" style="font-weight: bold; color: #4f46e5;"></span>
                    </div>
                    <div id="student-attendance-area" class="hidden" style="text-align: center; padding: 2rem; background: #f0fdf4; border: 1px solid #bbf7d0; border-radius: 12px;">
                        <button id="btn-submit-absensi" class="btn btn-success" style="font-size: 1.2rem; padding: 1rem 2rem;">âœ‹ SAYA HADIR</button>
                        <p id="msg-already-present" class="hidden" style="margin-top: 1rem; font-weight: bold; color: #166534;">âœ… Anda sudah mengisi daftar hadir hari ini.</p>
                    </div>
                    <div id="teacher-attendance-area" class="hidden">
                        <div id="attendance-list" class="content-list">
                            <p class="text-muted">Belum ada siswa yang absen hari ini.</p>
                        </div>
                    </div>
                </div>

                <div id="tab-anggota" class="tab-content hidden">
                    <h3>Daftar Anggota</h3>
                    <div id="member-list" class="content-list">
                        <p class="text-muted">Memuat anggota...</p>
                    </div>
                </div>
            </div>

            <div id="assignment-detail-page" class="hidden">
                <button class="btn btn-secondary back-btn" onclick="backToClass()">â† Kembali ke Kelas</button>
                <div class="detail-card">
                    <div style="border-bottom: 1px solid #eee; padding-bottom: 1rem; margin-bottom: 1rem;">
                        <h1 class="detail-title" id="sub-task-title">Detail Tugas</h1>
                        
                        <div id="task-attachment-container" class="hidden" style="margin-top: 10px;">
                            <a id="task-attachment-link" href="#" target="_blank" class="btn btn-secondary" style="background: #e0f2fe; color: #0284c7;">
                                ğŸ“„ Download File Soal / Lampiran
                            </a>
                        </div>
                    </div>

                    <p style="font-weight: bold; margin-bottom: 0.5rem;">Instruksi:</p>
                    <p id="sub-task-desc" class="text-muted" style="margin-bottom: 2rem; white-space: pre-line;"></p>

<div id="student-upload-area" class="hidden">
    <div class="upload-area">
        <h3>Upload Jawaban Anda</h3>
        
        <!-- Zone Upload Multi-File -->
        <div class="upload-zone" onclick="document.getElementById('student-file-upload').click()">
            <p id="upload-status-text">ğŸ“„ Klik untuk upload file (bisa lebih dari 1)</p>
            <input type="file" id="student-file-upload" style="display: none;" 
                   multiple 
                   accept="image/*,application/pdf"
                   onchange="handleMultiFileUpload(this)">
        </div>
        
        <!-- Preview File yang Dipilih -->
        <div id="file-preview-container" style="margin-top: 1rem; display: none;">
            <h4 style="font-size: 0.9rem; margin-bottom: 0.5rem;">File yang akan diupload:</h4>
            <div id="file-list" style="display: flex; flex-direction: column; gap: 8px;"></div>
        </div>
        
        <button class="btn btn-primary full-width" style="margin-top: 1rem;" onclick="submitMultipleAssignments()">
            Kirim Semua File
        </button>
    </div>
    
    <div id="student-grade-display" class="hidden" style="margin-top: 2rem; padding: 1rem; background: #eff6ff; border: 1px solid #bfdbfe; border-radius: 8px; text-align: center;">
        <h3>Nilai Anda: <span id="my-score" style="font-size: 2rem; font-weight: bold; color: #2563eb;">-</span> / 100</h3>
    </div>
</div>

                    <div id="teacher-grading-area" class="hidden">
                        <h3>Pengumpulan Siswa</h3>
                        <div id="submission-list" class="content-list">
                            <p class="text-muted">Belum ada siswa yang mengumpulkan.</p>
                        </div>
                    </div>
                </div>
            </div>

            <div id="profile-page" class="hidden">
                <div class="page-header">
                    <h1 class="page-title">Profil Saya</h1>
                    <p class="page-subtitle">Kelola data lengkap akun Anda.</p>
                </div>

                <div class="detail-card" style="max-width: 800px;">
                    <div style="display: flex; gap: 2rem; flex-wrap: wrap;">
                        <div style="text-align: center; width: 150px; flex-shrink: 0;">
    <img id="prof-avatar-img" src="https://ui-avatars.com/api/?name=User&background=random" 
         style="width: 120px; height: 120px; border-radius: 50%; object-fit: cover; margin-bottom: 1rem; border: 4px solid #f1f5f9;">
    
    <input type="file" id="prof-file-input" style="display: none;" accept="image/*">
    
    <button onclick="document.getElementById('prof-file-input').click()" class="btn btn-secondary" style="font-size: 0.8rem; width: 100%; margin-bottom: 10px;">
        ğŸ“¸ Ganti Foto
    </button>
    
    <p id="upload-progress-text" style="font-size: 0.75rem; color: #64748b;"></p>
    
    <input type="hidden" id="prof-photo-url"> 
    <div style="margin-top: 15px; padding: 10px; background: #f8fafc; border-radius: 8px; border: 1px solid #e2e8f0;">
        <small style="color: #64748b; font-weight: bold;">STATUS SAYA:</small>
        <p id="prof-bio-display" style="font-style: italic; color: #334155; margin-top: 5px;">...</p>
    </div>
</div>
                        <div style="flex-grow: 1;">
                            <h3 style="border-bottom: 1px solid #eee; padding-bottom: 10px; margin-bottom: 20px;">Informasi Dasar</h3>
                            <div class="form-group"><label>Nama Lengkap</label><input type="text" id="prof-name" class="form-input"></div>
                            <div class="form-group"><label>Email</label><input type="text" id="prof-email" class="form-input" disabled style="background: #f1f5f9;"></div>
                            <div style="display: flex; gap: 1rem;">
                                <div class="form-group" style="flex: 1;"><label>Role</label><input type="text" id="prof-role" class="form-input" disabled style="background: #f1f5f9;"></div>
                                <div class="form-group" style="flex: 1;"><label>Status</label><input type="text" id="prof-status" class="form-input" disabled style="background: #d1fae5; color: #059669; font-weight: bold;" value="Aktif"></div>
                            </div>
                            <h3 style="border-bottom: 1px solid #eee; padding-bottom: 10px; margin-bottom: 20px; margin-top: 30px;">Data Akademik & Kontak</h3>
                            <div class="form-group"><label id="label-id-number">NISN / NIK</label><input type="number" id="prof-nis" class="form-input" placeholder="Masukkan Nomor Induk..."></div>
                            <div class="form-group"><label>Nomor WhatsApp</label><input type="text" id="prof-phone" class="form-input" placeholder="08xxxxxxxxxx"></div>
                            <div class="form-group"><label>Asal Sekolah / Kelas</label><input type="text" id="prof-school" class="form-input" placeholder="Contoh: SMA 1 - Kelas X IPA"></div>
                            <div class="form-group"><label>Alamat Lengkap</label><textarea id="prof-address" class="form-input" rows="3" placeholder="Masukkan alamat lengkap..."></textarea></div>
                            <div style="text-align: right; margin-top: 2rem;">
                                <button id="btn-save-profile" class="btn btn-primary">Simpan Perubahan</button>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <div id="calendar-page" class="hidden">
    <div class="page-header">
        <h1 class="page-title">Kalender Akademik</h1>
        <p class="page-subtitle">Jadwal kegiatan belajar mengajar.</p>
    </div>
    
    <div class="detail-card">
        <div style="display:flex; justify-content:space-between; align-items:center; margin-bottom:20px;">
            <h2 id="month-year-display">Januari 2026</h2>
            <div>
                <button class="btn btn-secondary" onclick="changeMonth(-1)">â®</button>
                <button class="btn btn-secondary" onclick="changeMonth(1)">â¯</button>
            </div>
        </div>

        <div class="calendar-grid">
            <div class="day-name">Minggu</div>
            <div class="day-name">Senin</div>
            <div class="day-name">Selasa</div>
            <div class="day-name">Rabu</div>
            <div class="day-name">Kamis</div>
            <div class="day-name">Jumat</div>
            <div class="day-name">Sabtu</div>
            <div id="calendar-days" style="display:contents;"></div>
        </div>
    </div>
</div>

<div id="settings-page" class="hidden">
    <div class="page-header">
        <h1 class="page-title">Pengaturan Akun</h1>
    </div>

    <div class="detail-card" style="max-width: 600px;">
        
        <h3>ğŸ“ Bio & Status</h3>
        <div class="form-group">
            <label>Tentang Saya</label>
            <textarea id="settings-bio" class="form-input" rows="3" placeholder="Tulis sesuatu tentang dirimu... (Contoh: Siswa Kelas 10, Hobi Futsal)"></textarea>
        </div>
        <button id="btn-save-bio" class="btn btn-primary">Simpan Status</button>
        
        <hr style="margin: 2rem 0; border:0; border-top:1px solid #eee;">
        
        <h3>ğŸ¨ Tampilan</h3>
<div class="theme-toggle-wrapper">
    <label class="switch">
        <input type="checkbox" id="dark-mode-toggle">
        <span class="slider round"></span>
    </label>
    <span class="toggle-text">Aktifkan Mode Gelap ğŸŒ™</span>
</div>
    </div>
</div>

<div id="discussion-page" class="hidden">
    <div class="page-header">
        <h1 class="page-title">Forum Diskusi</h1>
        <p class="page-subtitle">Ruang obrolan umum untuk semua warga kelas.</p>
    </div>

    <div class="chat-box" style="display: flex; flex-direction: column; height: 70vh; border-radius: 12px; overflow: hidden; border: 1px solid #e2e8f0; background: #fff;">
        
        <div id="chat-container" class="chat-messages" style="flex: 1; padding: 20px; overflow-y: auto; display: flex; flex-direction: column; gap: 15px; background-color: #f8fafc;">
            <p class="text-muted" style="text-align:center;">Memuat percakapan...</p>
        </div>

        <div class="chat-input-area" style="padding: 15px; background: white; border-top: 1px solid #e2e8f0; display: flex; gap: 10px; align-items: center;">
            <input type="text" id="chat-input" class="form-input" placeholder="Tulis pesan..." style="border-radius: 20px;" onkeypress="if(event.key === 'Enter') sendChat()">
            <button onclick="sendChat()" class="btn btn-primary" style="border-radius: 50%; width: 45px; height: 45px; padding: 0; display: flex; align-items: center; justify-content: center;">
                â¤
            </button>  
        </div>
    </div>
</div>

<div id="transcript-page" class="hidden">
    <div class="page-header">
        <h1 class="page-title">Transkrip Nilai</h1>
        <p class="page-subtitle">Rekapitulasi seluruh hasil belajar Anda.</p>
    </div>

    <div class="dashboard-stats" style="grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); margin-bottom: 2rem;">
        <div class="stat-card">
            <div class="stat-icon" style="background: #dbeafe; color: #2563eb;">ğŸ“</div>
            <div>
                <div class="stat-value" id="trans-total-tugas">0</div>
                <div class="stat-label">Tugas Dikumpulkan</div>
            </div>
        </div>
        <div class="stat-card">
            <div class="stat-icon" style="background: #dcfce7; color: #16a34a;">â­</div>
            <div>
                <div class="stat-value" id="trans-avg-score">0</div>
                <div class="stat-label">Rata-Rata Nilai</div>
            </div>
        </div>
    </div>

    <div class="detail-card">
        <h3>Riwayat Penilaian</h3>
        <div class="table-responsive" style="margin-top: 15px;">
            <table style="width: 100%; border-collapse: collapse;">
                <thead>
                    <tr style="border-bottom: 2px solid #e2e8f0; text-align: left;">
                        <th style="padding: 12px;">Mata Pelajaran / Kelas</th>
                        <th style="padding: 12px;">Judul Tugas</th>
                        <th style="padding: 12px;">Nilai</th>
                        <th style="padding: 12px;">Status</th>
                    </tr>
                </thead>
                <tbody id="transcript-list">
                    </tbody>
            </table>
            <p id="trans-empty-msg" class="text-muted" style="text-align: center; margin-top: 20px;">Belum ada data nilai.</p>
        </div>
    </div>
</div>

<div id="my-classes-page" class="hidden">
    <div class="page-header" style="display: flex; justify-content: space-between; align-items: center;">
        <div>
            <h1 class="page-title">Kelas Saya</h1>
            <p class="page-subtitle">Daftar semua kelas yang Anda ikuti.</p>
        </div>
        <button id="btn-class-action-page" class="btn btn-primary" onclick="document.getElementById('join-class-modal').classList.remove('hidden')">
            + Gabung Kelas
        </button>
    </div>

    <div id="all-classes-grid" style="display: grid; grid-template-columns: repeat(auto-fill, minmax(280px, 1fr)); gap: 20px; margin-top: 20px;">
        <p class="text-muted">Memuat kelas...</p>
    </div>
</div>
<div id="search-result-page" class="hidden">
                <div class="page-header">
                    <h1 class="page-title">Hasil Pencarian</h1>
                    <p class="page-subtitle">Menampilkan hasil untuk: <span id="search-keyword-display" style="font-weight:bold;">...</span></p>
                </div>
                <div class="detail-card">
                    <div id="search-results-container">
                        <p class="text-muted" style="text-align: center;">Sedang mencari...</p>
                    </div>
                </div>
            </div>
        </main> </div> 

    <div id="modal-create-quiz" class="fullscreen-overlay hidden">
        <div class="modal-card" style="max-width: 600px; max-height: 90vh; overflow-y: auto;">
            <h2 class="modal-title">Buat Kuis Baru</h2>
            <div class="form-group">
                <label>Judul Kuis</label>
                <input type="text" id="quiz-title" class="form-input" placeholder="Contoh: Ulangan Harian 1">
            </div>
            <div id="questions-container"></div>
            <button onclick="addQuestionField()" class="btn btn-secondary full-width" style="margin-bottom: 1rem; border: 2px dashed #cbd5e1;">+ Tambah Pertanyaan</button>
            <div class="modal-actions">
                <button onclick="document.getElementById('modal-create-quiz').classList.add('hidden')" class="btn btn-secondary">Batal</button>
                <button onclick="saveQuiz()" class="btn btn-primary">Terbitkan Kuis</button>
            </div>
        </div>
    </div>

    <div id="modal-do-quiz" class="fullscreen-overlay hidden">
        <div class="modal-card" style="max-width: 700px; max-height: 90vh; overflow-y: auto;">
            <h2 id="do-quiz-title" class="modal-title">Judul Kuis</h2>
            <div id="quiz-content-area"></div>
            <button id="btn-submit-quiz" class="btn btn-primary full-width" style="margin-top: 20px;">Kirim Jawaban</button>
            <button onclick="document.getElementById('modal-do-quiz').classList.add('hidden')" class="btn btn-secondary full-width" style="margin-top: 10px;">Tutup</button>
        </div>
    </div>

    <script type="module" src="script.js"></script>
    <script type="module" src="login-fix.js"></script>
</body>
</html>